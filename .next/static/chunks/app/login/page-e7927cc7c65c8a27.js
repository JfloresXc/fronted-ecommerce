(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{64122:function(e,t,r){Promise.resolve().then(r.bind(r,52903))},91933:function(e,t,r){"use strict";var n=r(9268),a=r(35846),s=r.n(a),o=r(86006);let i={regular:"max-w-xs text-white bg-primary hover:opacity-2 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded text-sm px-5 py-2.5 text-center hover:bg-secondary text-[13px] md:text-sm lg:text-15px leading-4 h-11 md:h-[50px] px-5 lg:px-6 py-4 md:py-3.5 lg:py-4"};t.Z=o.memo(function(e){let{label:t,nameIcon:r,type:a="button",location:o="",design:l="regular",width:c="120px",handleClick:u=()=>{}}=e,d="".concat(i[l]," w-[").concat(c,"]");return o?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(s(),{className:"".concat(d),href:o,children:[(0,n.jsx)("i",{className:"fas ".concat(r)})," ",t]})}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("button",{className:"".concat(d),type:a,onClick:u,children:[(0,n.jsx)("i",{className:"fas ".concat(r)})," ",t]})})})},52903:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var n=r(9268),a=r(36596),s=r(92664),o=r(19700),i=r(47994),l=r(91933);function c(){return(0,n.jsxs)("div",{className:"mb-6 text-center",children:[(0,n.jsx)("div",{}),(0,n.jsx)("h4",{className:"text-xl font-semibold text-brand-dark sm:text-2xl sm:pt-3 ",children:"\xa1Bienvenido una vez m\xe1s!"}),(0,n.jsxs)("div",{className:"mt-3 mb-1 text-sm text-center sm:text-15px text-body",children:["\xbfNo tienes una cuenta?"," ",(0,n.jsx)("a",{href:"#",className:"text-primary hover:underline focus:outline-none",children:"Crea una cuenta"})]})]})}function u(){let{register:e,handleSubmit:t,formState:{errors:r}}=(0,o.cI)({mode:"onChange"}),{login:u}=(0,a.a)(),d=async e=>{let{email:t,password:r}=e;await u({email:t,password:r})};return(0,n.jsxs)("div",{className:"max-h-min block w-full md:w-1/2 lg:w-[45%] xl:w-[35%] py-6 sm:py-10 px-4 sm:px-8 md:px-6 lg:px-8 xl:px-12 rounded-md flex flex-col justify-center border border-gray-200 mx-auto",children:[(0,n.jsx)(c,{}),(0,n.jsxs)("form",{className:"space-y-6",onSubmit:t(d),children:[(0,n.jsx)(s.Z,{name:"email",label:"Tu correo electr\xf3nico",pattern:i.m.email,errors:r,validations:{...e("email",{required:!0,pattern:i.m.email})}}),(0,n.jsx)(s.Z,{type:"password",name:"password",label:"Tu contrase\xf1a",errors:r,validations:{...e("password",{required:!0})}}),(0,n.jsx)("div",{className:"flex items-start",children:(0,n.jsxs)("div",{className:"flex items-start",children:[(0,n.jsx)("div",{className:"flex items-center h-5",children:(0,n.jsx)("input",{id:"remember",type:"checkbox",value:"",className:"w-4 h-4 border border-gray-300 rounded bg-gray-50 focus:ring-3 focus:ring-primary"})}),(0,n.jsx)("label",{htmlFor:"remember",className:"ml-2 text-sm font-medium text-gray-900 dark:text-gray-300",children:"Recu\xe9rdame"})]})}),(0,n.jsx)("div",{className:"flex justify-center align-center",children:(0,n.jsx)(l.Z,{label:"Iniciar sesi\xf3n",type:"submit",width:"200px"})})]})]})}},92664:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(9268),a=r(86006);function s(e){var t;let{label:r="Not label",name:s,type:o="text",errors:i,validations:l,amountMinLength:c=5}=e,u=(0,a.useId)(1,"login-email-"),d=null===(t=i[s])||void 0===t?void 0:t.type,m="required"===d,x="pattern"===d,f="minLength"===d,p=m||x||f?"red":"gray";return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"mb-3",children:[(0,n.jsx)("label",{htmlFor:u,className:"block font-normal text-sm leading-none mb-3 cursor-pointer text-".concat(p,"-500"),children:r}),(0,n.jsx)("input",{type:o,step:"any",id:u,className:"px-5 text-heading outline-none w-full h-[52px] ltr:pl-5 rtl:pr-5 md:ltr:pl-6 md:rtl:pr-6 ltr:pr-14 rtl:pl-14 md:ltr:pr-16 md:rtl:pl-16 bg-brand-light text-sm lg:text-15px rounded-md transition-all duration-200 border border-".concat(d?p+"-500":"gray-200"),...l}),m&&(0,n.jsxs)("p",{className:"mt-2 text-xs text-red-500",children:[(0,n.jsx)("span",{className:"font-medium",children:"Oops!"})," Este campo es requerido"]}),x&&(0,n.jsxs)("p",{className:"mt-2 text-xs text-red-500",children:[(0,n.jsx)("span",{className:"font-medium",children:"Oops!"})," Ingresa un correo v\xe1lido"]}),f&&(0,n.jsxs)("p",{className:"mt-2 text-xs text-red-500",children:[(0,n.jsx)("span",{className:"font-medium",children:"Oops!"})," Caract\xe9res m\xednimos es"," ",c]})]})})}},27762:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthContext:function(){return o},default:function(){return i}});var n=r(9268),a=r(86006);function s(e,t){let[r,n]=(0,a.useState)(t);return(0,a.useDebugValue)(r),(0,a.useEffect)(()=>{let t=localStorage.getItem(e);t&&n(function(e){try{return JSON.parse(e)}catch(t){return e}}(t))},[]),(0,a.useEffect)(()=>{r&&localStorage.setItem(e,JSON.stringify(r))},[r]),[r,n]}let o=a.createContext({});function i(e){let{children:t}=e,[r,a]=s("jwt",""),[i,l]=s("user",{});return(0,n.jsx)(o.Provider,{value:{jwt:r,setJwt:a,user:i,setUser:l},children:t})}},84894:function(e,t,r){"use strict";r.r(t),r.d(t,{LoadingContext:function(){return s},default:function(){return o}});var n=r(9268),a=r(86006);let s=a.createContext({});function o(e){let{children:t}=e,[r,o]=(0,a.useState)(!1);return(0,n.jsx)(s.Provider,{value:{loading:r,setLoading:o},children:t})}},36596:function(e,t,r){"use strict";r.d(t,{a:function(){return l}});var n=r(86006),a=r(56008),s=r(27762),o=r(19124);let i={"Content-Type":"application/json"},l=()=>{let{tryCatch:e}=(0,o.V)(),{jwt:t,setJwt:r,user:l,setUser:c}=(0,n.useContext)(s.AuthContext),u=(0,a.useRouter)(),d=async t=>{let{email:n,password:a}=t;e(async()=>{let e=await fetch("/api/auth/login",{method:"POST",headers:i,body:JSON.stringify({email:n,password:a})}),t=await e.json();return t},e=>{let{token:t="",user:n={}}=e;r(t),c(n),u.push("/account")})},m=async()=>{e(async()=>{let e=await fetch("/api/auth/logout"),t=await e.json();return t},()=>{window.localStorage.clear(),r(""),u.push("/login")})};return{isLogged:!!t,jwt:t,setJwt:r,idUser:null==l?void 0:l.id,login:d,logout:m,HEADERS:{...i,Authorization:"Bearer ".concat(t)}}}},19124:function(e,t,r){"use strict";r.d(t,{V:function(){return i}});var n=r(69799);let a=e=>{let{message:t="Error de conexion no mapeado",isError:r}=e;return r&&(0,n.G)({message:t}),{isError:r}};var s=r(16554),o=r(56008);let i=()=>{let{showLoading:e,hideLoading:t}=(0,s.r)(),r=(0,o.useRouter)(),n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"TokenExpiredError"===e||"JsonWebTokenError"===e||"NotBeforeError"===e},i=async function(s){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e();try{let e=await s(),{name:i}=e;t(),n(i)&&r.push("/logout");let{isError:l}=a(e);return l||(e=await o(e)),e}catch(e){t(),a({isError:!0})}},l=async r=>{e();try{let e=await r();return a(e),t(),e}catch(e){t(),a({isError:!0})}},c=async(r,n)=>{e();try{let e=await r();t();let{isError:s}=a(e);s||n(e)}catch(e){t(),a({isError:!0})}};return{tryCatchReturnResponse:l,tryCatchOnlyActions:c,tryCatch:i}}},16554:function(e,t,r){"use strict";r.d(t,{r:function(){return s}});var n=r(86006),a=r(84894);let s=()=>{let{loading:e,setLoading:t}=(0,n.useContext)(a.LoadingContext);return{isLoading:!!e,showLoading:()=>t(!0),hideLoading:()=>t(!1)}}},69799:function(e,t,r){"use strict";r.d(t,{G:function(){return s},w:function(){return o}});var n=r(40856),a=r.n(n);let s=e=>{let{message:t}=e;a().fire({icon:"error",html:"<h4>".concat(t,"</h4>"),timer:3e3,showConfirmButton:!1,width:400,padding:"2em 3em",background:"#fff url(/images/trees.png)",backdrop:"\n    rgba(123, 0, 0, 0.4)\n    left top\n    no-repeat\n  "})},o=e=>{let{message:t}=e;a().fire({icon:"success",html:"<h4>".concat(t,"</h4>"),timer:3e3,showConfirmButton:!1,width:400,padding:"2em 3em",backdrop:"\n    rgba(129, 233, 121, 0.4)\n    left top\n    no-repeat\n  "})}},47994:function(e,t,r){"use strict";r.d(t,{m:function(){return n}});let n={names:/^[a-zA-ZÀ-ÿ\s]{1,40}$/,password:/^.{4,12}$/,email:/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/,phone:/^\d{7,9}$/}}},function(e){e.O(0,[377,846,700,667,488,744],function(){return e(e.s=64122)}),_N_E=e.O()}]);