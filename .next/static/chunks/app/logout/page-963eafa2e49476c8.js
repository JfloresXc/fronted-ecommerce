(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[805],{82364:function(t,e,n){Promise.resolve().then(n.bind(n,8592))},8592:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return u}});var r=n(9268),o=n(36596);function u(){let{logout:t}=(0,o.a)();return t(),(0,r.jsx)(r.Fragment,{})}},27762:function(t,e,n){"use strict";n.r(e),n.d(e,{AuthContext:function(){return i},default:function(){return a}});var r=n(9268),o=n(86006);function u(t,e){let[n,r]=(0,o.useState)(e);return(0,o.useDebugValue)(n),(0,o.useEffect)(()=>{let e=localStorage.getItem(t);e&&r(function(t){try{return JSON.parse(t)}catch(e){return t}}(e))},[]),(0,o.useEffect)(()=>{n&&localStorage.setItem(t,JSON.stringify(n))},[n]),[n,r]}let i=o.createContext({});function a(t){let{children:e}=t,[n,o]=u("jwt",""),[a,c]=u("user",{});return(0,r.jsx)(i.Provider,{value:{jwt:n,setJwt:o,user:a,setUser:c},children:e})}},84894:function(t,e,n){"use strict";n.r(e),n.d(e,{LoadingContext:function(){return u},default:function(){return i}});var r=n(9268),o=n(86006);let u=o.createContext({});function i(t){let{children:e}=t,[n,i]=(0,o.useState)(!1);return(0,r.jsx)(u.Provider,{value:{loading:n,setLoading:i},children:e})}},36596:function(t,e,n){"use strict";n.d(e,{a:function(){return c}});var r=n(86006),o=n(56008),u=n(27762),i=n(19124);let a={"Content-Type":"application/json"},c=()=>{let{tryCatch:t}=(0,i.V)(),{jwt:e,setJwt:n,user:c,setUser:s}=(0,r.useContext)(u.AuthContext),l=(0,o.useRouter)(),f=async e=>{let{email:r,password:o}=e;t(async()=>{let t=await fetch("/api/auth/login",{method:"POST",headers:a,body:JSON.stringify({email:r,password:o})}),e=await t.json();return e},t=>{let{token:e="",user:r={}}=t;n(e),s(r),l.push("/account")})},d=async()=>{t(async()=>{let t=await fetch("/api/auth/logout"),e=await t.json();return e},()=>{window.localStorage.clear(),n(""),l.push("/login")})};return{isLogged:!!e,jwt:e,setJwt:n,idUser:null==c?void 0:c.id,login:f,logout:d,HEADERS:{...a,Authorization:"Bearer ".concat(e)}}}},19124:function(t,e,n){"use strict";n.d(e,{V:function(){return a}});var r=n(69799);let o=t=>{let{message:e="Error de conexion no mapeado",isError:n}=t;return n&&(0,r.G)({message:e}),{isError:n}};var u=n(16554),i=n(56008);let a=()=>{let{showLoading:t,hideLoading:e}=(0,u.r)(),n=(0,i.useRouter)(),r=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"TokenExpiredError"===t||"JsonWebTokenError"===t||"NotBeforeError"===t},a=async function(u){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t();try{let t=await u(),{name:a}=t;e(),r(a)&&n.push("/logout");let{isError:c}=o(t);return c||(t=await i(t)),t}catch(t){e(),o({isError:!0})}},c=async n=>{t();try{let t=await n();return o(t),e(),t}catch(t){e(),o({isError:!0})}},s=async(n,r)=>{t();try{let t=await n();e();let{isError:u}=o(t);u||r(t)}catch(t){e(),o({isError:!0})}};return{tryCatchReturnResponse:c,tryCatchOnlyActions:s,tryCatch:a}}},16554:function(t,e,n){"use strict";n.d(e,{r:function(){return u}});var r=n(86006),o=n(84894);let u=()=>{let{loading:t,setLoading:e}=(0,r.useContext)(o.LoadingContext);return{isLoading:!!t,showLoading:()=>e(!0),hideLoading:()=>e(!1)}}},69799:function(t,e,n){"use strict";n.d(e,{G:function(){return u},w:function(){return i}});var r=n(40856),o=n.n(r);let u=t=>{let{message:e}=t;o().fire({icon:"error",html:"<h4>".concat(e,"</h4>"),timer:3e3,showConfirmButton:!1,width:400,padding:"2em 3em",background:"#fff url(/images/trees.png)",backdrop:"\n    rgba(123, 0, 0, 0.4)\n    left top\n    no-repeat\n  "})},i=t=>{let{message:e}=t;o().fire({icon:"success",html:"<h4>".concat(e,"</h4>"),timer:3e3,showConfirmButton:!1,width:400,padding:"2em 3em",backdrop:"\n    rgba(129, 233, 121, 0.4)\n    left top\n    no-repeat\n  "})}}},function(t){t.O(0,[377,667,488,744],function(){return t(t.s=82364)}),_N_E=t.O()}]);