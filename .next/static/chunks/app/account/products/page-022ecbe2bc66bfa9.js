(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[90],{11777:function(e,t,a){Promise.resolve().then(a.bind(a,1414))},1414:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return p}});var n=a(9268),r=a(8683),s=a.n(r),c=a(97944),o=a(84272);let i=[{accessorKey:"name",header:()=>(0,n.jsx)("span",{children:"Nombre"}),cell:e=>(0,n.jsx)("span",{className:"font-bold",children:e.getValue()})},{accessorKey:"price",header:()=>(0,n.jsx)("span",{children:"Precio"}),cell:e=>(0,n.jsx)("span",{children:"S/."+e.getValue().toFixed(2)})},{accessorKey:"nameCategory",header:()=>(0,n.jsx)("span",{children:"Categor\xeda"}),cell:e=>{var t;let a=null!==(t=e.getValue())&&void 0!==t?t:"";return a=a.slice(0,25)+"...",(0,n.jsx)("span",{children:a})}},{accessorKey:"state",header:()=>(0,n.jsx)("span",{children:"Estado"}),cell:e=>(0,n.jsx)("span",{className:s()({"text-xs text-gray-600 font-medium mr-2 px-2.5 py-0.5 rounded border":!0,"bg-red-100 border-red-400":0===e.getValue(),"bg-green-100 border-green-400":1===e.getValue()}),children:e.getValue()?"Activo":"Inactivo"}),enableSorting:!0},{accessorKey:"id",header:"Acciones",cell:e=>{let t=e.getValue();return(0,n.jsx)("div",{className:"space-x-2",children:(0,n.jsx)(c.Z,{linkEdit:"/account/products/e".concat(t)})})},enableSorting:!1}];function d(e){let{data:t=[]}=e;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(o.Z,{title:"Productos",subtitle:"Lista de productos registrados en el sistema",columns:i,data:t,linkRefActionAdd:"/account/products/a"})})}var l=a(67279),u=a(86006);function p(){let[e,t]=(0,u.useState)([]),{getAllProducts:a}=(0,l.r)();return(0,u.useEffect)(()=>{a().then(e=>{t(e)})},[]),(0,n.jsx)(d,{data:e})}},67279:function(e,t,a){"use strict";a.d(t,{r:function(){return c}});var n=a(19124),r=a(69799),s=a(56008);let c=()=>{let{tryCatch:e}=(0,n.V)(),t=(0,s.useRouter)(),a=async()=>e(async()=>{let e=await fetch("/api/products/getAll"),t=await e.json();return t},e=>{var t;let a=e.map(e=>{var a;return{...e,nameCategory:null!==(t=null==e?void 0:null===(a=e.category)||void 0===a?void 0:a.name)&&void 0!==t?t:""}});return a}),c=async()=>e(async()=>{let e=await fetch("/api/products/getAll?state=1"),t=await e.json();return t},e=>e),o=async t=>{let{id:a}=t;return e(async()=>{let e=await fetch("/api/products/getOne?id=".concat(a)),t=await e.json();return t},e=>e)},i=async t=>{let{idProduct:a}=t;return e(async()=>{let e=await fetch("/api/products/imagesForIdProduct?id=".concat(a)),t=await e.json();return t},e=>e)},d=async a=>e(async()=>{let e=await fetch("/api/products/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),t=await e.json();return t},()=>{(0,r.w)({message:"\xa1Producto agregado!"}),t.push("/account/products")}),l=async t=>e(async()=>{let e=await fetch("/api/upload",{method:"POST",body:t}),a=await e.json();return a},e=>{(0,r.w)({message:"\xa1Imagen agregada!"})}),u=async(a,n)=>e(async()=>{let e=await fetch("/api/products/edit?id=".concat(a),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),t=await e.json();return t},()=>{(0,r.w)({message:"\xa1Producto editado!"}),t.push("/account/products")}),p=async t=>{let{id:a}=t;return e(async()=>{let e=await fetch("/api/products/deleteImage?id=".concat(a),{method:"DELETE",headers:{"Content-Type":"application/json"}}),t=await e.json();return t},()=>{(0,r.w)({message:"\xa1Imagen eliminada!"})})};return{getAllProducts:a,getActivedProducts:c,getOneProduct:o,getImagesForIdProduct:i,addNewProduct:d,addOneImage:l,editProduct:u,deleteImageOfProduct:p}}}},function(e){e.O(0,[377,846,769,171,530,667,488,744],function(){return e(e.s=11777)}),_N_E=e.O()}]);